<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nautica Clone</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brand: { DEFAULT: '#0ea5e9' } }
        }
      },
      darkMode: 'media'
    }
  </script>
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" content="#0ea5e9">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='46' fill='%230ea5e9'/><text x='50' y='58' text-anchor='middle' font-size='42' fill='white' font-family='Arial'>N</text></svg>">
</head>
<body class="bg-neutral-950 text-neutral-50 min-h-screen">
  <div class="max-w-5xl mx-auto px-4 py-8">
    <header class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="size-10 rounded-xl bg-brand/20 grid place-items-center text-brand font-bold">N</div>
        <div>
          <h1 class="text-xl sm:text-2xl font-bold">Nautica Clone</h1>
          <p class="text-neutral-400 text-sm">Edge-like API & modern UI</p>
        </div>
      </div>
      <a href="/api/v1/myip" class="text-sm text-neutral-300 hover:text-white">My IP</a>
    </header>

    <main class="mt-8 grid gap-8">
      <section class="p-5 rounded-2xl border border-white/10 bg-white/5 backdrop-blur">
        <h2 class="font-semibold mb-4">Generate Subscription</h2>
        <form id="sub-form" class="grid sm:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm mb-1">Country Codes (optional)</label>
            <input name="cc" placeholder="ID,SG" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand" />
          </div>
          <div>
            <label class="block text-sm mb-1">Ports</label>
            <input name="port" value="443,80" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand" />
          </div>
          <div>
            <label class="block text-sm mb-1">VPN Protocols</label>
            <input name="vpn" value="vless,trojan,ss" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand" />
          </div>
          <div>
            <label class="block text-sm mb-1">Limit</label>
            <input name="limit" value="10" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand" />
          </div>
          <div>
            <label class="block text-sm mb-1">Format</label>
            <select name="format" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand">
              <option value="raw">raw</option>
              <option value="v2ray">v2ray (base64)</option>
              <option value="clash">clash</option>
              <option value="sfa">sfa</option>
              <option value="bfr">bfr</option>
            </select>
          </div>
          <div>
            <label class="block text-sm mb-1">Override Domain (optional)</label>
            <input name="domain" placeholder="example.com" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand" />
          </div>
          <div class="sm:col-span-2 flex gap-3">
            <button class="px-4 py-2 rounded-lg bg-brand text-white font-semibold hover:bg-sky-500">Generate</button>
            <a id="open-sub" class="px-4 py-2 rounded-lg bg-white/10 hover:bg-white/15 border border-white/10 cursor-pointer">Open /sub</a>
          </div>
        </form>
        <div class="mt-4">
          <label class="block text-sm mb-1">Result</label>
          <textarea id="sub-result" rows="8" class="w-full p-3 rounded-lg bg-black/60 border border-white/10 font-mono text-sm"></textarea>
        </div>
      </section>

      <section class="p-5 rounded-2xl border border-white/10 bg-white/5 backdrop-blur">
        <h2 class="font-semibold mb-4">Proxy Health Check</h2>
        <form id="check-form" class="flex gap-3 flex-wrap items-end">
          <div>
            <label class="block text-sm mb-1">Target</label>
            <input name="target" placeholder="1.2.3.4:443" class="px-3 py-2 rounded-lg bg-white/10 border border-white/10 focus:outline-none focus:ring-2 focus:ring-brand" />
          </div>
          <button class="px-4 py-2 rounded-lg bg-brand text-white font-semibold hover:bg-sky-500">Check</button>
        </form>
        <pre id="check-result" class="mt-4 p-3 rounded-lg bg-black/60 border border-white/10 overflow-auto text-sm"></pre>
      </section>
    </main>
    <footer class="py-10 text-center text-neutral-500 text-sm">Built with ❤️ for demo purposes</footer>
  </div>

  <script>
    const form = document.getElementById('sub-form');
    const resultEl = document.getElementById('sub-result');
    const openSub = document.getElementById('open-sub');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const params = new URLSearchParams(new FormData(form));
      const url = `/api/v1/sub?${params.toString()}`;
      const res = await fetch(url);
      const txt = await res.text();
      resultEl.value = txt;
    });
    openSub.addEventListener('click', () => {
      window.location.href = '/sub';
    });

    const checkForm = document.getElementById('check-form');
    const checkResult = document.getElementById('check-result');
    checkForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const params = new URLSearchParams(new FormData(checkForm));
      const res = await fetch(`/check?${params.toString()}`);
      const js = await res.json();
      checkResult.textContent = JSON.stringify(js, null, 2);
    });
  </script>
</body>
</html>

